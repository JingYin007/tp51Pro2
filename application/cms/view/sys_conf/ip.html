{extend name="layouts/cms"}
{block name='body-content'}

<div class="layui-inline layui-form">
    ll
</div>
{/block}

{block name='single-content'}
<script src="__CMS__/js/moZhang.js"></script>
<script>
    layui.use(['form', 'layer'], function () {
        var form = layui.form;
        form.on('switch(switchConfigID)', function (data) {
            //开关是否开启，true或者false
            var checked = data.elem.checked;
            var okStatus = 0;
            if (checked) {okStatus = 1}
            //获取所需属性值
            var switch_config_id = data.elem.attributes['switch_config_id'].nodeValue;
            //TODO 此时进行ajax的服务器访问，如果返回数据正常，则进行后面代码的调用
            var toUrl = "{:url('cms/config/ajaxUpdateSwitchValue')}";
            $.post(
                toUrl,
                {config_id: switch_config_id, okStatus: okStatus},
                function (result) {
                    if (result.status > 0) {
                        data.elem.checked = checked;
                    } else {
                        data.elem.checked = !checked;
                    }
                    form.render();
                    layer.msg(result.message);
                }, "JSON");
        });
    });


    $(".btn-search-mz").on('click', function () {
        $(".form-search").submit();
    });

</script>
{/block}